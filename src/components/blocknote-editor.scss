/**
 * BlockNote Editor Styles
 *
 * Minimal overrides - preserves BlockNote's native styling.
 */

// Editor wrapper
.blocknote-editor-wrapper {
  min-height: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;

  // === CRITICAL: Tailwind preflight override ===
  // Tailwind adds margin-top: 1.25rem to <p> elements
  // BlockNote uses <p> for .bn-inline-content (text inside blocks)
  // This margin breaks vertical alignment of toggles, checkboxes, lists, etc.
  .bn-inline-content {
    margin: 0 !important;
  }

  // Fix image caption spacing - Tailwind adds margin to caption <p> elements
  .bn-file-caption,
  .bn-image-block-content-wrapper p,
  [data-content-type="image"] p {
    margin: 0 !important;
  }

  // === Heading size fix ===
  // BlockNote uses CSS custom property --level for heading sizes
  // Default: H1=3em, H2=2em, H3=1.3em (very large!)
  // Override to match more reasonable sizes like the BlockNote demo
  [data-content-type="heading"] {
    --level: 1.875em !important; // H1: 30px at 16px base (was 3em/48px)
  }
  [data-content-type="heading"][data-level="2"] {
    --level: 1.5em !important; // H2: 24px (was 2em/32px)
  }
  [data-content-type="heading"][data-level="3"] {
    --level: 1.25em !important; // H3: 20px (was 1.3em/21px)
  }

  // === Code block text color fix ===
  // BlockNote's code block has dark background but default text color is dark
  // Override to ensure white text on dark background for legibility
  [data-content-type="codeBlock"] {
    pre, code {
      color: #fff !important;
    }
  }
}

// Inline editor variant (for DataTable popup)
.blocknote-editor-inline {
  .blocknote-editor-wrapper {
    padding: 12px 0;
  }
}

// Fullscreen editor variant - matches TiptapEditor layout
.blocknote-editor-fullscreen {
  height: 100%;
  overflow-y: auto;

  // The cell wrapper fills the container
  > div {
    height: 100%;
  }

  .blocknote-editor-wrapper {
    height: 100%;
    min-height: 100%;
    padding: 24px 0;
  }

  // Editor content fills available space
  .bn-editor {
    min-height: calc(100% - 48px); // Account for padding
  }
}
